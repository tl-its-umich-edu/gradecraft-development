.mainContent

  = content_nav_for Group

  .small-12.medium-9
    %h3.pagetitle= "#{term_for :groups}"

  .small-12.medium-3.right.columns
    .button-bar.right
      %ul.button-group.context_menu
        %li
          %i.fi-plus
          = link_to_unless_current "New #{term_for :group}", new_group_path

  - if @groups.pending.present?

    %h4.subtitle= "Pending #{term_for :groups}"

    .small-12.columns  

      %table.responsive.nofeatures_dynatable
        %thead
          %tr
            %th #{term_for :group} Name
            %th #{current_course.user_term}s
            %th Status
            %th #{term_for :assignments} 
            %th.button-column
        %tbody
          - @groups.pending.each do |group|
            %tr
              %td= link_to group.name, group_path(group)
              %td
                - group.group_memberships.each do |gm|
                  %li= link_to gm.student.name, student_path(gm.student)
              %td= group.approved
              %td
                - group.assignment_groups.each do |ag|
                  %li= link_to ag.assignment.name, ag.assignment
              %td
                .button-bar
                  %ul.button-group.round.right
                    %li= link_to "Review #{term_for :group}", review_groups_path(:id => group), :class => 'button'
                    %li= link_to 'Edit', edit_group_path(group), :class => 'button'
                    %li= link_to 'Delete', group_path(group), :class => 'button', :data => { confirm: 'Are you sure?' }, :method => :delete

    .clearfix

  - if @groups.rejected.present?

    %h4.subtitle= "Rejected #{term_for :groups}"

    .small-12.columns  

      %table.responsive.nofeatures_dynatable
        %thead
          %tr
            %th #{term_for :group} Name
            %th= "#{current_course.user_term}s"
            %th Status
            %th #{term_for :assignments} 
            %th.button-column
        %tbody
          - @groups.rejected.each do |group|
            %tr
              %td= link_to group.name, group_path(group)
              %td
                - group.group_memberships.each do |gm|
                  %li= link_to gm.student.name, student_path(gm.student)
              %td= group.approved
              %td
                - group.assignment_groups.each do |ag|
                  %li= link_to ag.assignment.name, ag.assignment
              %td
                .button-bar
                  %ul.button-group.round.right
                    %li= link_to "Review #{term_for :group}", review_groups_path(:id => group), :class => 'button'
                    %li= link_to 'Edit', edit_group_path(group), :class => 'button'
                    %li= link_to 'Delete', group_path(group), :class => 'button', :data => { confirm: 'Are you sure?' }, :method => :delete

    .clearfix

  - if @groups.approved.present?
    
    %h4.subtitle= "Approved #{term_for :groups}"

    .small-12.columns  

      %table.responsive.nofeatures_dynatable
        %thead
          %tr
            %th #{term_for :group} Name
            %th= "#{current_course.user_term}s"
            %th Status
            %th #{term_for :assignments} 
            %th.button-column
        %tbody
          - @groups.approved.each do |group|
            %tr
              %td= link_to group.name, group_path(group)
              %td
                - group.group_memberships.each do |gm|
                  %li= link_to gm.student.name, student_path(gm.student)
              %td= group.approved
              %td
                - group.assignment_groups.each do |ag|
                  %li= link_to ag.assignment.name, ag.assignment
              %td
                .button-bar
                  %ul.button-group.round.right
                    %li= link_to "Review #{term_for :group}", review_groups_path(:id => group), :class => 'button'
                    %li= link_to 'Edit', edit_group_path(group), :class => 'button'
                    %li= link_to 'Delete', group_path(group), :class => 'button', :data => { confirm: 'Are you sure?' }, :method => :delete